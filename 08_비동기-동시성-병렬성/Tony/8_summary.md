# 8장. 비동기 프로그래밍, 동시성과 병렬성

- 비동기 통신 방식

  - 멀티스레드 지원 언어 : 자바, C++ 등
  - 이벤트 루프 모델(태스크 멀티 플렉싱 기법) : 자바스크립트
    - 스레드 하나로 비동기 작업을 처리

- 멀티 스레드 기반 프로그래밍의 문제점

  - 동기화된 데이터 타입의 오버헤드, 뮤텍스(mutex), 세마포어(semaphore)

    - 세마포어(Semaphore)는 공유 자원에 여러 프로세스가 접근하는 것을 막는 것을 말합니다.
      - 세마포어는 이를 위해서 현재 공유 자원의 상태를 나타내는 카운터 변수를 사용하게 됩니다.
      - 이러한 변수는 실제로 운영체제 혹은 커널에 값으로 저장되며, 각 프로세스는 이를 확인할 수 있고 값을 변경할 수도 있게 됩니다.
      - 각각의 프로세스들은 이런 상태값을 확인하여 자원을 즉시 사용할 수 있는 상태라면
        즉시 사용할 수 있고 만약에 누군가가 자원을 사용중이라는 것을 인지하게되면, 반드시 일정 시간을 기다렸다가 사용하게 됩니다.
    - 뮤텍스(Mutex)는 상호 배제(Mutual Exclusion)를 뜻하는 말로,
      Critical Section을 가지는 쓰레드들의 Running time이 서로 겹치지 않도록 해주는 기법입니다.
    - 세마 포어와 가장 큰 차이점으로는 공유 자원에 접근할 수 있는 대상의 개수 차이입니다.
    - 뮤텍스는 1개의 스레드만이 공유 자원에 접근할 수 있도록 합니다.
    - 참고 : [뮤텍스와 세마포어 차이](https://velog.io/@logandev/%EC%84%B8%EB%A7%88%ED%8F%AC%EC%96%B4%EC%99%80-%EB%AE%A4%ED%85%8D%EC%8A%A4-%EC%B0%A8%EC%9D%B4)

  - 공유메모리 - 데이터를 직렬화해서 보낼 때 활용하는 일반적인 패턴

- 자바스크립트는 공유 메모리는 거의 사용하지 않는다

  - 얼랭(Erlang), 액터 시스템, 순수 함수형 동시성 모델을 연상 시키는 기능
  - 멀티 스레드 프로그래밍을 안전하게 해주는 핵심

- 단일 스레드에서 어떻게 실행을 정지하고 재개할 수 있는지 살펴보자

## 8.1 자바스크립트의 이벤트 루프

- 멀티 스레드 언어에선 하나의 스레드안에선 동기적으로 코드가 동작하는 것 같다

  - C언어의 sleep vs. 자바스크립트의 setTimeout

## ... (워커스레드 등 내용 생략)

## 정리

- 비동기 통신을 하는 방식에 대해서 알아보았다

  - 멀티스레딩 방식
  - 이벤트 루프 방식

- 자바스크립트에서 비동기 통신을 하는 방법들

  - 콜백 - Promise 등장 이후론 콜백을 계속 전달하는 방식(콜백헬)은 더 이상 사용되지 않음
  - Promise
  - async/await

- 리액티브 프로그래밍

  - 이벤트 기반 프로그래밍
  - 프로미스로 해결하기 어려운 문제(이벤트를 여러번 발생 시킴)은 이벤트 방출기나 RxJS같은
    리액티브 스트림 라이브러리 사용을 고려해보자

- 자바스크립트 런타임 환경에서 멀티스레드 사용하기
  - 브라우저 : 웹 워커
    - tsconfig의 lib에 "webworker" 추가 필요
  - Nodejs : 워커 스레드
