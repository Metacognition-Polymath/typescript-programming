자바스크립트는 콜백, 프로미스, 스트림등 다양한 동작을 별도의 스레드에서 수행하는 비동기 작업을 처리할 때 위력을 발휘한다.
자바스크립트 엔진은 영리하게 이벤트 루프 스레드 하나로 비동기 작업을 처리한다. 
자바스크립트는 이벤트 루프 기반의 동시성 모델을 이요해 멀티스레드 기반 프로그래밍에서 공통적으로 나타나는 문제점을(동기화된 타입의 어버헤드, 뮤텍스, 세마포어, 기타 멀티 스레딩 문제) 해결한다. 공유메모리는 스레드 간 메시지나 데이터를 직렬화 해서 보낼 때 활용하는 일반적 패턴이지만, 자바스크립트를 여러스레드에서 실행해도 공유메모리는 거의 사용하지 않는다. 이는 얼랭, 액터시스템 다른 순수함수형 동시성 모델을 연상시키는 기능으로 자바스크립트의 멀티스레드 프로그래밍을 안전하게 해주는 핵심이다.
타입을 이용하면 비동기 작업을 추적할 수 있으며 async/await 내장 기능을 이용해 비동기 프로그래밍을 동기프로그래밍과 비슷한 관점에서 접근할 수 있다.
또 멀티스레드 프로그램에서 엄격한 메시지 전달 프로토콜을 지정하도록 할 수 있다. 

## 8.1 자바스크립트 이벤트 루프

자바스크립트 vm은 다음처럼 동시성을 흉내낸다.

자바스크립트 메인스레드
  힙
    변수등 메모리 저장. 
  콜스택 
    동기적인코드는 콜스택만으로 수행종료
    비동기함수는 플랫폼으로 넘김
      프로미스는 동기함수, then이 붙으면 비동기함수
    힙에서 데이터 참조 사용
    스택 
      맥시멈사이즈 스택오버플로우시 종료. 크롬은 약 12만개 스택

플랫폼 멀티스레드
  전달된 태스크, 비동기 api 수행
    호출 관련한 메타 정보
    메인스레드 연결 콜백 참조 포함
  스레드는 각각 고유의 큐를 갖고있음
    작업 완료시 콜백큐에 넘김

콜백큐
  마이크로큐 - 잡큐 (프로미스,...)
  애니메이션프레임
  태스크큐 - 이벤트큐 (셋타임아웃)
  으로 구성, 위부터 우선순위를 가짐

이벤트루프
  콜스택이 비면 우선순위에 따라 큐를 콜스택으로 넘김

## 8.2 콜백 사용
